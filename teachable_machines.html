<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
    <!-- Name of tab -->
    <title>Teachable Machine</title>
    
    <!-- Link to CSS styles page -->
    <link rel="stylesheet" href="stylepage.css">  
    <link href="https://fonts.googleapis.com/css2?family=Boldonse&display=swap" rel="stylesheet">
</head>
<body>
    
    <!-- The navigator bar at the top of the screen - links to our other html pages -->
    <div class="page-container">
    <nav class="navigator"> <!-- To design this, use .navigator{ on stylepage.css -->
        <a href="index.html">Home</a>
        <a href="about_elijah.html">About Us: Elijah</a>
        <a href="about_nia.html">About Us: Nia</a>
        <a href="tech_heroes.html">Tech Heroes</a>
        <a href="resources.html">Resources</a>
        <a href="project_statement.html">Project Statement</a>
        <a href="teachable_machines.html">Our Teachable Machine</a>
    </nav>   

<!-- Title for the page -->
 <h1 class="teachableTitle">The Bananalyzer</h1>

<!-- Body content -->
<p class="text">We named our teachable machine The Bananalyzer</p>

<p class="definitionTM">
  For the first iteration of our project we've managed to begin starting on our teachable machine. It is currently able to identify each classification except for perfect banana, so we will continue to work on that. If you are interested in trying our machine, check out the link! 
</p>

<div style="text-align: center;">
  <button type="button" onclick="init()">Start</button>
</div>

<div id="webcam-container"></div>
<div id="label-container"></div>

<!-- Load TensorFlow.js and Teachable Machine libraries -->
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest/dist/tf.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@latest/dist/teachablemachine-image.min.js"></script>

<script type="text/javascript">
    const URL = "./tm-my-image-model/";  // folder where you uploaded the files

    let model, webcam, labelContainer, maxPredictions;

    async function init() {
        const modelURL = URL + "model.json";
        const metadataURL = URL + "metadata.json";

        model = await tmImage.load(modelURL, metadataURL);
        maxPredictions = model.getTotalClasses();

        const flip = true;
        webcam = new tmImage.Webcam(200, 200, flip);
        await webcam.setup();
        await webcam.play();
        window.requestAnimationFrame(loop);

        document.getElementById("webcam-container").appendChild(webcam.canvas);
        labelContainer = document.getElementById("label-container");
        for (let i = 0; i < maxPredictions; i++) {
            labelContainer.appendChild(document.createElement("div"));
        }
    }

    async function loop() {
        webcam.update();
        await predict();
        window.requestAnimationFrame(loop);
    }

    async function predict() {
        const prediction = await model.predict(webcam.canvas);
        for (let i = 0; i < maxPredictions; i++) {
            const classPrediction =
                prediction[i].className + ": " + prediction[i].probability.toFixed(2);
            labelContainer.childNodes[i].innerHTML = classPrediction;
        }
    }
</script>

 
<!-- Formating images -->
  <div class="container">
      <figure>
        <img src="images/stack2.jpg" alt="Bottom stacked image">
      </figure>
  </div>
      
    <p class="followUp">For project three, we have added Joe Weckworth to our group. He contributed to this page. </p>
      
   <!-- Footer -->
  <footer class="footer"> <!-- To design this .footer{ in stylepage.css -->
      <p>
        Nia Davis, Elijah Warren, and Joe Weckworth - LIS 500 Code and Power Project #3
        - University of Wisconsin-Madison
      </p>
  </footer>
  </div>
</body>

</html>
